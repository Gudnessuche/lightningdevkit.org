(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{311:function(e,t,a){e.exports=a.p+"assets/img/cash-app-architecture.b24c7ec1.svg"},338:function(e,t,a){"use strict";a.r(t);var n=a(6),o=Object(n.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("Our team builds the Cash App lightning wallet. We power all lightning bitcoin withdrawals and deposits within Cash App.")]),e._v(" "),t("p",[e._v("Cash App is the #1 finance app in the App Store – we have extremely high standards for product development and the infrastructure that powers all our cool features. We were looking for a solution that would ensure high reliability, high scalability, and a stellar developer experience. Cash App is the financial hub for millions of people and often the first place an individual acquires bitcoin, so having a slick user experience, and the infrastructure to onboard lots of new users is extremely important. As a publicly traded company, we take security very seriously, so having the ability to customize our wallet implementation to adhere to our security standards was necessary.")]),e._v(" "),t("p",[e._v("We chose LDK for various reasons over other implementations. It provided us with a lot of customizability and flexibility. The "),t("a",{attrs:{href:"https://github.com/lightningdevkit/ldk-garbagecollected",target:"_blank",rel:"noopener noreferrer"}},[e._v("Java bindings"),t("OutboundLink")],1),e._v(" let us develop in Kotlin, which is the preferred language we use at Cash for backend services. We also had a great working relationship with the "),t("a",{attrs:{href:"https://spiral.xyz/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Spiral"),t("OutboundLink")],1),e._v(" folks and so it was great to collaboratively work together on more advanced feature asks (phantom invoices!).")]),e._v(" "),t("h1",{attrs:{id:"what-we-did"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#what-we-did"}},[e._v("#")]),e._v(" What we did")]),e._v(" "),t("p",[e._v("LDK allowed us to develop an extremely scalable lightning node infrastructure. We run multiple wallet nodes and have strict requirements on what peers we can connect to and strict parameters around opening channels. We have logic that does advanced probing in the background, to ensure we have an up to date snapshot of the liquidity on the lighting network.")]),e._v(" "),t("figure",[t("img",{attrs:{src:a(311),alt:"CashApp architecture"}})]),e._v(" "),t("p",[e._v("We also do probing before every send, so that we can pre-fetch a route and execute the send after a customer has confirmed the send. We have utilized LDK’s "),t("a",{attrs:{href:"https://lightningdevkit.org/blog/introducing-phantom-node-payments/",target:"_blank",rel:"noopener noreferrer"}},[e._v("phantom node"),t("OutboundLink")],1),e._v(" feature, so we can generate invoices that can be claimed by more than one node. We use MySQL to save our channel state data and node metadata, this allows us to quickly shut down and start up nodes at will on different servers. LDK allows us to run A/B tests on different pathfinding algorithms.")]),e._v(" "),t("h1",{attrs:{id:"results"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#results"}},[e._v("#")]),e._v(" Results")]),e._v(" "),t("p",[e._v("The outcome was that we were able to relatively quickly build a lightning wallet to power bitcoin withdrawals and deposits on Cash App taking into account the complicated constraints we had as a publicly traded company with tens of millions of users.")]),e._v(" "),t("p",[e._v("Users can now deposit and withdraw their bitcoin to Cash App over lightning, so essentially instant BTC deposits and withdrawals for free.")]),e._v(" "),t("p",[e._v("To learn more check out this "),t("a",{attrs:{href:"https://www.youtube.com/watch?v=kbhL5RqL8Aw",target:"_blank",rel:"noopener noreferrer"}},[e._v("presentation"),t("OutboundLink")],1),e._v(" at btc++ explaining some of the trade-offs the Cash App team had to think about when comparing LDK to other solutions.")])])}),[],!1,null,null,null);t.default=o.exports}}]);